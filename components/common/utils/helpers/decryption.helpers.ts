import crypto from 'crypto';

export const decryptData = (encryptedMessage: string, privateKey = "RSA_PRIVATE_KEY=MIIEowIBAAKCAQEAqn8Cgu99JFQxXpqbS/+nm7c67Olp0GjTDGFWFf5JiFHO3m5rLnGBBwliUuHTelPqwqROkglIzLeBznccVjwJ3QoErhV9Fx6R9WQlbBvbJvOZ4A/ZE4PVx4+75+g19u9x8U4Awj0ZzQIIx+jUpb1drM+wgk3iT6QcH26ln4WZWjx7UHhjXAEC/rQi+zdhaEOzlJ/ctZvref5FvqyUV28sHN0vxdcC4adKhiEEgTCPNJAj6sfjX/HF7Hu6Ewr1qImmKC9S55icIAjxWD90BJkPZu0zMJn7g5jAd5H0GLoV1Gh8EnWC5HW33KHTgCdH78JvqiqkuBVYG77hAw1ZUv2HtQIDAQABAoIBAA5eQ8TrD93G5p41Y08FTYe26lVa2lsA6oBJl6qk0meVlVxza77vO9Nu/AVGGL9fYRJkLGbsN2FhOaQ/r3io+J/TH0/YacFQBzbp6Klys4ZV0yrpyv51BsgZmdlSXXHg/fY6/59e7NS1Di5itcD9824D1rk0fRT/HIudlIGcDa9n9CzTO2NgLpheIJIktNyDf+T5zxdb3YZ+lhgpbUwknmbFpJYiXrUpZIUi0RXgHUbCF5CMGagnuonE9qSp40xbXcABk6BIGdmcGoNnsQQ1lVyAGYSmM1sAJJa8VW6KbtdMFNbZmULnR0SiIWio644xMtJTHZFpy0Y2RrLXd6M1Q6UCgYEA3H9SLH43oG5JMVbOPa86UqnXIrjm3w5v0SDYuSvN3qS9xRRLUMbqhCgv+1Cpf9u//3ob+wKFMz/NHJWAmYKIoSE3XbmS/JCkOPPz4PrTG8NMNcDIU9+bPK4AWhBafkN13K0WRBm3reFJzhIiWz/fvuTawN5by179wLwgRMTzY2MCgYEAxfKwYOzqzk5hKqRl2S3fUZlbqHVczObYutnUKMhxBnyd5MtF2eVV73TS2ck/NTjcFgqe63VqmBMYjk3pqSCMz6jEVs2H0aIfJAsDMzAIKWc2Gi+6Sx0JobCWvSxNW7FCJ9u72cS86yl915kErs1sQvCDwzHGrocB4ikRZdMD8AcCgYAxu84PFxD48Kc1p7yxERr4ljJeNJJucVUrOFtpuMWgmEvtbdxnBdbTpDTeXJ0+p5QwzZwOC817d8KN1fLBrT2gClvwmfDbYsyHxA6YCjsfofdIkIke0eqzzxNpPRMMM68b7TZ+ecaCQ7Rf9JsnNcsDxZ7Jrd3Ki0x08nncyQeUvQKBgQCgRw6LnKnPHGXOykhxXpRJFPzDXSwj+PMZ8FC6KPpjfzm1zOWlNe2sMxKbJzlX1c9WxYjCLFOACU5Dw1BkEigR6Jv5kPfdRQEkBQq1QroJFDoZX/Xe5gcrdbnIOPv2N4PSlDf5bzRs0S7FCHBjPY/gb7Cwtzghjs12mzwsD31LtwKBgE1qfVt09AXENIIDKECA1gb1mAco+Pi++nvdTHJ56jM+DFTOjheY7ydpfZBPYnvL2aDYnMGdbAYAlbsQx/cUnxoV6RuPkshj/J7ZAqmY6NSpnMtCkSIz9PANoAbL+dpvfvYOo+FlZQUPg1I3Z3zMxG0R0DxC9sL+49TX7pt3MroR"): string => {
  const rsaPrivateKey = {
    key: Buffer.from(privateKey, 'base64'),
    format: 'der',
    type: 'pkcs1',
    padding: crypto.constants.RSA_PKCS1_PADDING,
  };
  console.log(crypto)

  const decryptedMessage = crypto.privateDecrypt(rsaPrivateKey, Buffer.from(encryptedMessage, 'base64'));

  return decryptedMessage.toString('utf8');
};
